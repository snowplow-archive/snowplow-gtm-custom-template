___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "displayName": "Snowplow Analytics",
  "description": "Load, configure, and deploy the Snowplow Analytics JavaScript tracker library. It supports the full functionality of the JavaScript SDK.",
  "__wm": "VGVtcGxhdGUtQXV0aG9yX1Nub3dwbG93QW5hbHl0aWNzLVNpbW8tQWhhdmE=",
  "securityGroups": [],
  "categories": [
    "ANALYTICS"
  ],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "displayName": "Snowplow",
    "id": "brand_dummy",
    "thumbnail": "data:image/png;base64,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jQB7s1+193/x9WGk2qpIZHb3Lnds1fNk5KV/kUpBxT1kgI3r/uzxs3/6w4u5yf8lfRGrSASd9//LxPHp2YdVG9b92aOX/vW/mtXzlOEQrdg0LX6esp9/8Zd/8l1825872wwwk5tMVB/tnf77//4/Xnv87B83ov88g4ddmIFYLD0wnERKIpciMpKyDWvnE/XVGfEyZGaCQ38PU5faq1z5OReLAzJjUwkkE1vOf/1Pb9Xx4NweDCCWSw3cTJ4dvMU0kqx3u6stzlbtduEhuuVSrbvS6CVDItNce/tAM4OHfV4I+gGodMnWxvRCZCHCTIRsxMzDXjxEd0TxYPZ//u//8+ff/dP/Wxv08xCtJlqxcfqb90/+222V/2Yq6GchNTwDccz0tw+jJ85/ehFplU3ktzMtO1Op1l28KGg5BhBH9Wa/au/88HP2ESKj8B6SWxhAHIdedCPSJdnSmGJ7ErcwgITA9LcPo/1ffH34vetsLU7+EhnHa9v/8stDu7f3h+EGftgwgIRMJjeZ+P3fTfyGZySkU1N9deY3f113kdVVbmMACam5x0/LJvIP6jKF7a2J/INald5aRNGKjdPRik35qopN09GKjflErEZ6eibZjQGEiIiU8CY6EREpYQAhIiIlDCBERKSEAYSIiJQwgBARkRIGECIiUsIAQkREShhAiIhICQMIEREpYQAhIiIlDCBERKSEAYSIiJQwgBARkRIGECIiUsIAQkREShhAiIhICQMIEREpYQAhIiIlDCBERKSEAYSIiJQwgBARkRIGECIiUsIAQkREShhAiIhICQMIEREpYQAhIiIlDCBERKSEAYSIiJQwgBARkRIGECIiUsIAQkREShhAiIhICQMIEREpYQAhIiIlDCBERKSEAYSIiJQwgBARkRIGECIiUsIAQkREShhAiIhICQMIEREpYQAhIiIlDCBERKSEAYSIiJQwgBARkRIGECIiUsIAQkREShhAiIhICQMIEREpYQAhIiIlDCBERKSEAYSIiJT8/wAAAP//k6HgDMXTtssAAAAASUVORK5CYII\u003d"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "help": "This is the name of the tracker instance. It is used to distinguish the configuration you have set for one tracker instance from all the other possible tracker instances on the page. See \u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/1-General-parameters-for-the-Javascript-tracker#22-initialising-a-tracker\"\u003ethis\u003c/a\u003e for more information.",
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "displayName": "Tracker Name",
    "simpleValueType": true,
    "name": "trackerName",
    "type": "TEXT",
    "valueHint": "e.g. spTracker"
  },
  {
    "help": "Enter the hostname of the collector.",
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "args": [
          "^[a-z0-9.:]+.*"
        ],
        "errorMessage": "The endpoint URL must be a valid hostname.",
        "type": "REGEX"
      }
    ],
    "displayName": "Collector Endpoint Hostname",
    "simpleValueType": true,
    "name": "collectorEndpoint",
    "type": "TEXT",
    "valueHint": "e.g. snowplowcollector.cloudfront.net"
  },
  {
    "selectItems": [
      {
        "displayValue": "Ad Tracking",
        "value": "adTracking"
      },
      {
        "value": "cartTracking",
        "displayValue": "Cart Tracking"
      },
      {
        "value": "enhancedEcommerce",
        "displayValue": "Enhanced Ecommerce"
      },
      {
        "value": "trackError",
        "displayValue": "Error Tracking"
      },
      {
        "value": "formTracking",
        "displayValue": "Form Tracking"
      },
      {
        "value": "linkTracking",
        "displayValue": "Link Click Tracking"
      },
      {
        "value": "trackConsent",
        "displayValue": "Consent"
      },
      {
        "displayValue": "Page View",
        "value": "trackPageView"
      },
      {
        "displayValue": "Self-describing Event",
        "value": "trackSelfDescribingEvent"
      },
      {
        "value": "trackSiteSearch",
        "displayValue": "Site Search"
      },
      {
        "displayValue": "Social Interaction",
        "value": "trackSocialInteraction"
      },
      {
        "displayValue": "Structured Event",
        "value": "trackStructEvent"
      },
      {
        "value": "trackTiming",
        "displayValue": "Timing"
      },
      {
        "value": "customCommand",
        "displayValue": "[Custom Command]"
      }
    ],
    "displayName": "Tag Type",
    "simpleValueType": true,
    "name": "eventType",
    "type": "SELECT",
    "defaultValue": "trackPageView",
    "help": "Choose the type of event you want to send or [Custom command] to select from a list of available tracker commands."
  },
  {
    "type": "GROUP",
    "name": "paramConfig",
    "displayName": "Parameter Configuration",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "paramsFromVariable",
        "displayName": "Retrieve Parameters From Variable",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "no",
            "displayValue": "No"
          }
        ],
        "simpleValueType": true,
        "help": "Choose a Google Tag Manager variable that returns an object of key-value pairs that will then be encoded as the parameters for this hit. Select \"No\" if you want to add the parameters manually."
      },
      {
        "enablingConditions": [
          {
            "paramName": "eventType",
            "type": "EQUALS",
            "paramValue": "trackStructEvent"
          }
        ],
        "name": "structEventConfig",
        "groupStyle": "NO_ZIPPY",
        "type": "GROUP",
        "subParams": [
          {
            "type": "SIMPLE_TABLE",
            "name": "structEventParams",
            "simpleTableColumns": [
              {
                "defaultValue": "category",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "isUnique": true,
                "selectItems": [
                  {
                    "value": "category",
                    "displayValue": "category (required)"
                  },
                  {
                    "value": "action",
                    "displayValue": "action (required)"
                  },
                  {
                    "value": "label",
                    "displayValue": "label"
                  },
                  {
                    "value": "property",
                    "displayValue": "property"
                  },
                  {
                    "value": "value",
                    "displayValue": "value"
                  }
                ]
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "enablingConditions": [
              {
                "paramName": "paramsFromVariable",
                "paramValue": "no",
                "type": "EQUALS"
              }
            ],
            "newRowButtonText": "Add Parameter"
          }
        ],
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#custom-structured-events\"\u003eRead more\u003c/a\u003e about Structured Events.",
        "displayName": "Structured Event"
      },
      {
        "enablingConditions": [
          {
            "paramName": "eventType",
            "type": "EQUALS",
            "paramValue": "trackSelfDescribingEvent"
          }
        ],
        "name": "selfDescribingEventConfig",
        "groupStyle": "NO_ZIPPY",
        "type": "GROUP",
        "subParams": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "displayName": "Schema URL",
            "simpleValueType": true,
            "name": "selfDescribingEventSchemaUrl",
            "type": "TEXT"
          },
          {
            "type": "SIMPLE_TABLE",
            "name": "selfDescribingEventParams",
            "simpleTableColumns": [
              {
                "defaultValue": "",
                "displayName": "Parameter name",
                "name": "name",
                "type": "TEXT",
                "isUnique": true
              },
              {
                "defaultValue": "",
                "displayName": "Parameter value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "enablingConditions": [
              {
                "paramName": "paramsFromVariable",
                "paramValue": "no",
                "type": "EQUALS"
              }
            ],
            "newRowButtonText": "Add Parameter"
          }
        ],
        "displayName": "Self-describing Event",
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#37-tracking-custom-self-describing-unstructured-events\"\u003eRead more\u003c/a\u003e about Self-describing Events."
      },
      {
        "enablingConditions": [
          {
            "paramName": "eventType",
            "type": "EQUALS",
            "paramValue": "trackSocialInteraction"
          }
        ],
        "name": "socialInteractionConfig",
        "groupStyle": "NO_ZIPPY",
        "type": "GROUP",
        "subParams": [
          {
            "type": "SIMPLE_TABLE",
            "name": "socialInteractionParams",
            "simpleTableColumns": [
              {
                "defaultValue": "action",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "selectItems": [
                  {
                    "value": "action",
                    "displayValue": "action (required)"
                  },
                  {
                    "value": "network",
                    "displayValue": "network (required)"
                  },
                  {
                    "value": "target",
                    "displayValue": "target"
                  }
                ],
                "isUnique": true
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "enablingConditions": [
              {
                "paramName": "paramsFromVariable",
                "paramValue": "no",
                "type": "EQUALS"
              }
            ],
            "newRowButtonText": "Add Parameter"
          }
        ],
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#34-social-tracking\"\u003eRead more\u003c/a\u003e about Social Interaction tracking.",
        "displayName": "Social Interaction"
      },
      {
        "type": "GROUP",
        "name": "adTrackingConfig",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "SELECT",
            "name": "adTrackingType",
            "displayName": "Ad Tracking Type",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "trackAdImpression",
                "displayValue": "Impression"
              },
              {
                "value": "trackAdClick",
                "displayValue": "Click"
              },
              {
                "value": "trackAdConversion",
                "displayValue": "Conversion"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "trackAdImpression"
          },
          {
            "type": "SIMPLE_TABLE",
            "name": "adTrackingParams",
            "simpleTableColumns": [
              {
                "defaultValue": "advertiserId",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "isUnique": true,
                "selectItems": [
                  {
                    "value": "action",
                    "displayValue": "action"
                  },
                  {
                    "value": "advertiserId",
                    "displayValue": "advertiserId"
                  },
                  {
                    "value": "bannerId",
                    "displayValue": "bannerId"
                  },
                  {
                    "value": "campaignId",
                    "displayValue": "campaignId"
                  },
                  {
                    "value": "category",
                    "displayValue": "category"
                  },
                  {
                    "value": "conversionId",
                    "displayValue": "conversionId"
                  },
                  {
                    "value": "clickId",
                    "displayValue": "clickId"
                  },
                  {
                    "value": "cost",
                    "displayValue": "cost"
                  },
                  {
                    "value": "costModel",
                    "displayValue": "costModel"
                  },
                  {
                    "value": "impressionId",
                    "displayValue": "impressionId"
                  },
                  {
                    "value": "initialValue",
                    "displayValue": "initialValue"
                  },
                  {
                    "value": "property",
                    "displayValue": "property"
                  },
                  {
                    "value": "targetUrl",
                    "displayValue": "targetUrl"
                  },
                  {
                    "value": "zoneId",
                    "displayValue": "zoneId"
                  }
                ]
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "enablingConditions": [
              {
                "paramName": "paramsFromVariable",
                "paramValue": "no",
                "type": "EQUALS"
              }
            ],
            "newRowButtonText": "Add Parameter"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "eventType",
            "paramValue": "adTracking",
            "type": "EQUALS"
          }
        ],
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#ad-tracking\"\u003eRead more\u003c/a\u003e about Ad Tracking.",
        "displayName": "Ad Tracking"
      },
      {
        "type": "GROUP",
        "name": "cartTrackingConfig",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "SELECT",
            "name": "cartTrackingType",
            "selectItems": [
              {
                "value": "trackAddToCart",
                "displayValue": "Add To Cart"
              },
              {
                "value": "trackRemoveFromCart",
                "displayValue": "Remove From Cart"
              }
            ],
            "simpleValueType": true,
            "displayName": "Tracking Type"
          },
          {
            "type": "SIMPLE_TABLE",
            "name": "cartTrackingParams",
            "simpleTableColumns": [
              {
                "defaultValue": "sku",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "isUnique": true,
                "valueValidators": [],
                "selectItems": [
                  {
                    "value": "sku",
                    "displayValue": "sku (required)"
                  },
                  {
                    "value": "unitPrice",
                    "displayValue": "unitPrice (required)"
                  },
                  {
                    "value": "quantity",
                    "displayValue": "quantity (required)"
                  },
                  {
                    "value": "name",
                    "displayValue": "name"
                  },
                  {
                    "value": "category",
                    "displayValue": "category"
                  },
                  {
                    "value": "currency",
                    "displayValue": "currency"
                  }
                ]
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "enablingConditions": [
              {
                "paramName": "paramsFromVariable",
                "paramValue": "no",
                "type": "EQUALS"
              }
            ],
            "newRowButtonText": "Add Parameter"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "eventType",
            "paramValue": "cartTracking",
            "type": "EQUALS"
          }
        ],
        "displayName": "Cart Tracking",
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#311-trackaddtocart-and-trackremovefromcart\"\u003eRead more\u003c/a\u003e about Cart Tracking."
      },
      {
        "type": "GROUP",
        "name": "siteSearchConfig",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "SIMPLE_TABLE",
            "name": "siteSearchParams",
            "simpleTableColumns": [
              {
                "defaultValue": "terms",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "isUnique": true,
                "selectItems": [
                  {
                    "value": "terms",
                    "displayValue": "terms (required)"
                  },
                  {
                    "value": "filters",
                    "displayValue": "filters"
                  },
                  {
                    "value": "totalResults",
                    "displayValue": "totalResults"
                  },
                  {
                    "value": "pageResults",
                    "displayValue": "pageResults"
                  }
                ]
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "enablingConditions": [
              {
                "paramName": "paramsFromVariable",
                "paramValue": "no",
                "type": "EQUALS"
              }
            ],
            "newRowButtonText": "Add Parameter"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "eventType",
            "paramValue": "trackSiteSearch",
            "type": "EQUALS"
          }
        ],
        "displayName": "Site Search",
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#312-tracksitesearch\"\u003eRead more\u003c/a\u003e about Site Search tracking."
      },
      {
        "type": "GROUP",
        "name": "timingConfig",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "SIMPLE_TABLE",
            "name": "timingParams",
            "simpleTableColumns": [
              {
                "defaultValue": "category",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "isUnique": true,
                "selectItems": [
                  {
                    "value": "category",
                    "displayValue": "category (required)"
                  },
                  {
                    "value": "variable",
                    "displayValue": "variable (required)"
                  },
                  {
                    "value": "timing",
                    "displayValue": "timing (required)"
                  },
                  {
                    "value": "label",
                    "displayValue": "label"
                  }
                ]
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "newRowButtonText": "Add Parameter",
            "enablingConditions": [
              {
                "paramName": "paramsFromVariable",
                "paramValue": "no",
                "type": "EQUALS"
              }
            ]
          }
        ],
        "enablingConditions": [
          {
            "paramName": "eventType",
            "paramValue": "trackTiming",
            "type": "EQUALS"
          }
        ],
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#313-tracktiming\"\u003eRead more\u003c/a\u003e about tracking Timing hits.",
        "displayName": "Timing"
      },
      {
        "type": "GROUP",
        "name": "consentConfig",
        "displayName": "Consent",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "SELECT",
            "name": "consentType",
            "selectItems": [
              {
                "value": "grant",
                "displayValue": "Grant"
              },
              {
                "value": "withdraw",
                "displayValue": "Withdraw"
              }
            ],
            "simpleValueType": true,
            "displayName": "Consent Type"
          },
          {
            "type": "SIMPLE_TABLE",
            "name": "consentParams",
            "simpleTableColumns": [
              {
                "defaultValue": "id",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "isUnique": true,
                "selectItems": [
                  {
                    "value": "id",
                    "displayValue": "id"
                  },
                  {
                    "value": "version",
                    "displayValue": "version"
                  },
                  {
                    "value": "name",
                    "displayValue": "name"
                  },
                  {
                    "value": "description",
                    "displayValue": "description"
                  },
                  {
                    "value": "expiry",
                    "displayValue": "expiry"
                  },
                  {
                    "value": "all",
                    "displayValue": "all"
                  }
                ]
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "newRowButtonText": "Add Parameter",
            "enablingConditions": [
              {
                "paramName": "paramsFromVariable",
                "paramValue": "no",
                "type": "EQUALS"
              }
            ]
          }
        ],
        "enablingConditions": [
          {
            "paramName": "eventType",
            "paramValue": "trackConsent",
            "type": "EQUALS"
          }
        ],
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#315-consent-tracking\"\u003eRead more\u003c/a\u003e about tracking Consent status."
      },
      {
        "type": "GROUP",
        "name": "errorConfig",
        "displayName": "Error Tracking",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "SIMPLE_TABLE",
            "name": "errorTrackingParams",
            "simpleTableColumns": [
              {
                "defaultValue": "message",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "isUnique": true,
                "selectItems": [
                  {
                    "value": "message",
                    "displayValue": "message (required)"
                  },
                  {
                    "value": "filename",
                    "displayValue": "filename"
                  },
                  {
                    "value": "lineno",
                    "displayValue": "lineno"
                  },
                  {
                    "value": "colno",
                    "displayValue": "colno"
                  },
                  {
                    "value": "error",
                    "displayValue": "error"
                  }
                ],
                "valueValidators": []
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "newRowButtonText": "Add Parameter"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "eventType",
            "paramValue": "trackError",
            "type": "EQUALS"
          }
        ],
        "help": "\u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#trackError\"\u003eRead more\u003c/a\u003e about tracking error events."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "eventType",
        "paramValue": "trackStructEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "eventType",
        "paramValue": "trackSelfDescribingEvent",
        "type": "EQUALS"
      },
      {
        "paramName": "eventType",
        "paramValue": "trackSocialInteraction",
        "type": "EQUALS"
      },
      {
        "paramName": "eventType",
        "paramValue": "adTracking",
        "type": "EQUALS"
      },
      {
        "paramName": "eventType",
        "paramValue": "cartTracking",
        "type": "EQUALS"
      },
      {
        "paramName": "eventType",
        "paramValue": "trackSiteSearch",
        "type": "EQUALS"
      },
      {
        "paramName": "eventType",
        "paramValue": "trackTiming",
        "type": "EQUALS"
      },
      {
        "paramName": "eventType",
        "paramValue": "trackConsent",
        "type": "EQUALS"
      },
      {
        "paramName": "eventType",
        "paramValue": "trackError",
        "type": "EQUALS"
      }
    ]
  },
  {
    "displayName": "Page View Configuration",
    "name": "pageViewConfig",
    "groupStyle": "ZIPPY_OPEN",
    "type": "GROUP",
    "subParams": [
      {
        "selectItems": [
          {
            "displayValue": "Yes",
            "value": true
          },
          {
            "displayValue": "No",
            "value": false
          }
        ],
        "displayName": "Enable Page Activity Tracking",
        "defaultValue": false,
        "simpleValueType": true,
        "name": "pageViewEnablePageActivity",
        "type": "SELECT",
        "subParams": [
          {
            "type": "GROUP",
            "name": "pageActivityGroup",
            "displayName": "Page Activity Tracking Settings",
            "groupStyle": "ZIPPY_OPEN",
            "subParams": [
              {
                "valueValidators": [
                  {
                    "type": "POSITIVE_NUMBER"
                  },
                  {
                    "type": "NON_EMPTY"
                  }
                ],
                "displayName": "Minimum Visit Length",
                "simpleValueType": true,
                "name": "pageViewMinimumVisitLength",
                "valueUnit": "seconds",
                "type": "TEXT"
              },
              {
                "valueValidators": [
                  {
                    "type": "POSITIVE_NUMBER"
                  },
                  {
                    "type": "NON_EMPTY"
                  }
                ],
                "displayName": "Heartbeat Interval",
                "simpleValueType": true,
                "name": "pageViewHeartBeat",
                "valueUnit": "seconds",
                "type": "TEXT"
              },
              {
                "type": "SELECT",
                "name": "pageViewActivityCallback",
                "displayName": "Use Callback Function",
                "macrosInSelect": true,
                "selectItems": [
                  {
                    "value": "no",
                    "displayValue": "No"
                  }
                ],
                "simpleValueType": true,
                "help": "Set this to a Google Tag Manager variable that returns the function you want to invoke as the callback of the page activity ping."
              }
            ],
            "enablingConditions": [
              {
                "paramName": "pageViewEnablePageActivity",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "pageViewPageTitle",
        "displayName": "Custom Page Title",
        "simpleValueType": true,
        "valueHint": "Use current page title"
      },
      {
        "type": "SELECT",
        "name": "pageViewPageContextFunction",
        "displayName": "Add Custom Context Function",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "no",
            "displayValue": "No"
          }
        ],
        "simpleValueType": true,
        "help": "Set this to a Google Tag Manager variable that returns the function you want to execute when assigning a custom context to the Page View and page activity hits."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "eventType",
        "paramValue": "trackPageView",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "linkTrackingConfig",
    "displayName": "Link Click Tracking Configuration",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "linkTrackingType",
        "displayName": "Tracking Type",
        "selectItems": [
          {
            "value": "enableLinkClickTracking",
            "displayValue": "Enable Automatic Link Click Tracking"
          },
          {
            "value": "trackLinkClick",
            "displayValue": "Track Link Click Event"
          }
        ],
        "simpleValueType": true
      },
      {
        "type": "GROUP",
        "name": "linkTrackingEnable",
        "subParams": [
          {
            "type": "TEXT",
            "name": "linkTrackingBlacklist",
            "displayName": "Blacklist Classes",
            "simpleValueType": true,
            "help": "Add a comma-separated list (or variable that returns an array) of HTML classes. If any of these classes is on the HTML element when a link click event is triggered, the event will not be tracked. NOTE! Whitelist overrides this field.",
            "valueHint": "class1,class2,class3"
          },
          {
            "type": "TEXT",
            "name": "linkTrackingWhitelist",
            "displayName": "Whitelist Classes",
            "simpleValueType": true,
            "valueHint": "class1,class2,class3",
            "help": "Add a comma-separated list of HTML classes (or variable that returns an array) . If the clicked link element has any of these classes, the link click event will be tracked. All other elements will be ignored. NOTE! This field overrides the blacklist."
          },
          {
            "type": "CHECKBOX",
            "name": "linkTrackingPseudoClicks",
            "checkboxText": "Fix Middle-click Tracking",
            "simpleValueType": true,
            "defaultValue": true,
            "help": "Keep this checked to enable proper middle-click tracking on some browsers."
          },
          {
            "type": "CHECKBOX",
            "name": "linkTrackingInnerHTML",
            "checkboxText": "Track HTML Content Of Clicked Link",
            "simpleValueType": true,
            "help": "Check this box to track the entire HTML content (most often text) of the clicked link with the event."
          }
        ],
        "enablingConditions": [
          {
            "paramName": "linkTrackingType",
            "paramValue": "enableLinkClickTracking",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "GROUP",
        "name": "linkTrackingManual",
        "subParams": [
          {
            "type": "SIMPLE_TABLE",
            "name": "linkTrackingParameters",
            "simpleTableColumns": [
              {
                "defaultValue": "targetUrl",
                "displayName": "Parameter Name",
                "name": "name",
                "type": "SELECT",
                "isUnique": true,
                "selectItems": [
                  {
                    "value": "elementClasses",
                    "displayValue": "elementClasses"
                  },
                  {
                    "value": "elementContent",
                    "displayValue": "elementContent"
                  },
                  {
                    "value": "elementId",
                    "displayValue": "elementId"
                  },
                  {
                    "value": "elementTarget",
                    "displayValue": "elementTarget"
                  },
                  {
                    "value": "targetUrl",
                    "displayValue": "targetUrl (required)"
                  }
                ],
                "valueValidators": []
              },
              {
                "defaultValue": "",
                "displayName": "Parameter Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "newRowButtonText": "Add Parameter"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "linkTrackingType",
            "paramValue": "trackLinkClick",
            "type": "EQUALS"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "eventType",
        "paramValue": "linkTracking",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "formTrackingConfig",
    "displayName": "Form Tracking Configuration",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "GROUP",
        "name": "fromTrackingBlacklistGroup",
        "displayName": "Blacklist",
        "groupStyle": "ZIPPY_CLOSED",
        "subParams": [
          {
            "type": "TEXT",
            "name": "formTrackingBlacklistForms",
            "displayName": "Blacklist Form Classes",
            "simpleValueType": true,
            "help": "A comma-separated list (or variable that returns an array) of HTML classes. If the \u003cstrong\u003eform\u003c/strong\u003e element has any one of these classes, then the form will not be tracked. NOTE! The form whitelist overrides this field.",
            "valueHint": "form1,form2,form2"
          },
          {
            "type": "TEXT",
            "name": "formTrackingBlacklistFields",
            "displayName": "Blacklist Form Field Classes",
            "simpleValueType": true,
            "help": "A comma-separated list (or variable that returns an array) of HTML classes. If the \u003cstrong\u003eform field\u003c/strong\u003e element has any one of these as the value of its \u003cstrong\u003ename\u003c/strong\u003e attribute, then the field will not be tracked. NOTE! The form field whitelist overrides this field.",
            "valueHint": "field1,field2,field3"
          }
        ]
      },
      {
        "type": "GROUP",
        "name": "formTrackingWhitelistGroup",
        "displayName": "Whitelist",
        "groupStyle": "ZIPPY_CLOSED",
        "subParams": [
          {
            "type": "TEXT",
            "name": "formTrackingWhitelistForms",
            "displayName": "Whitelist Form Classes",
            "simpleValueType": true,
            "help": "A comma-separated list (or variable that returns an array) of HTML classes. Only those \u003cstrong\u003eforms\u003c/strong\u003e that have one of these classes will be tracked. NOTE! Overrides the form blacklist.",
            "valueHint": "form1,form2,form3"
          },
          {
            "type": "TEXT",
            "name": "formTrackingWhitelistFields",
            "displayName": "Whitelist Form Field Classes",
            "simpleValueType": true,
            "help": "A comma-separated list (or variable that returns an array) of HTML classes. Only those \u003cstrong\u003eform fields\u003c/strong\u003e that have one of these values as their \u003cstrong\u003ename\u003c/strong\u003e attribute will be tracked. NOTE! Overrides the form field blacklist.",
            "valueHint": "field1,field2,field3"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "eventType",
        "paramValue": "formTracking",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "enhancedEcommerceConfig",
    "displayName": "Enhanced Ecommerce Configuration",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "enhancedEcommerceUseDataLayer",
        "checkboxText": "Use Data Layer",
        "simpleValueType": true,
        "defaultValue": true,
        "help": "Check this to use a \u003ca href\u003d\"https://developers.google.com/tag-manager/enhanced-ecommerce\"\u003eproperly formatted Google Analytics dataLayer object\u003c/a\u003e for populating the Enhanced Ecommerce data. Uncheck this to reference a Google Tag Manager variable which returns the properly formatted object instead."
      },
      {
        "type": "SELECT",
        "name": "enhancedEcommerceVariable",
        "macrosInSelect": true,
        "selectItems": [],
        "simpleValueType": true,
        "displayName": "Choose Variable",
        "enablingConditions": [
          {
            "paramName": "enhancedEcommerceUseDataLayer",
            "paramValue": false,
            "type": "EQUALS"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "eventType",
        "paramValue": "enhancedEcommerce",
        "type": "EQUALS"
      }
    ]
  },
  {
    "enablingConditions": [
      {
        "paramName": "eventType",
        "type": "EQUALS",
        "paramValue": "customCommand"
      }
    ],
    "displayName": "Custom Command",
    "name": "customCommandConfig",
    "groupStyle": "ZIPPY_OPEN",
    "type": "GROUP",
    "subParams": [
      {
        "selectItems": [
          {
            "displayValue": "flushBuffer",
            "value": "flushBuffer"
          },
          {
            "displayValue": "setVisitorCookieTimeout",
            "value": "setVisitorCookieTimeout"
          },
          {
            "displayValue": "setCountPreRendered",
            "value": "setCountPreRendered"
          },
          {
            "displayValue": "setUserId",
            "value": "setUserId"
          },
          {
            "displayValue": "setUserIdFromLocation",
            "value": "setUserIdFromLocation"
          },
          {
            "displayValue": "setUserIdFromReferrer",
            "value": "setUserIdFromReferrer"
          },
          {
            "displayValue": "setUserIdFromCookie",
            "value": "setUserIdFromCookie"
          },
          {
            "displayValue": "setCustomUrl",
            "value": "setCustomUrl"
          },
          {
            "displayValue": "setReferrerUrl",
            "value": "setReferrerUrl"
          },
          {
            "displayValue": "preservePageViewId",
            "value": "preservePageViewId"
          },
          {
            "displayValue": "updatePageActivity",
            "value": "updatePageActivity"
          },
          {
            "value": "refreshLinkClickTracking",
            "displayValue": "refreshLinkClickTracking"
          },
          {
            "value": "setOptOutCookie",
            "displayValue": "setOptOutCookie"
          },
          {
            "value": "enableGdprContext",
            "displayValue": "enableGdprContext"
          },
          {
            "value": "addGlobalContexts",
            "displayValue": "addGlobalContexts"
          },
          {
            "value": "removeGlobalContexts",
            "displayValue": "removeGlobalContexts"
          },
          {
            "value": "clearGlobalContexts",
            "displayValue": "clearGlobalContexts"
          }
        ],
        "displayName": "Command name",
        "defaultValue": "setUserId",
        "simpleValueType": true,
        "name": "customCommand",
        "type": "SELECT"
      },
      {
        "enablingConditions": [
          {
            "paramName": "customCommand",
            "type": "EQUALS",
            "paramValue": "setVisitorCookieTimeout"
          },
          {
            "paramName": "customCommand",
            "type": "EQUALS",
            "paramValue": "setUserId"
          },
          {
            "paramName": "customCommand",
            "type": "EQUALS",
            "paramValue": "setUserIdFromLocation"
          },
          {
            "paramName": "customCommand",
            "type": "EQUALS",
            "paramValue": "setUserIdFromReferrer"
          },
          {
            "paramName": "customCommand",
            "type": "EQUALS",
            "paramValue": "setUserIdFromCookie"
          },
          {
            "paramName": "customCommand",
            "type": "EQUALS",
            "paramValue": "setCountPreRendered"
          },
          {
            "paramName": "customCommand",
            "type": "EQUALS",
            "paramValue": "setReferrerUrl"
          },
          {
            "paramName": "customCommand",
            "type": "EQUALS",
            "paramValue": "setCustomUrl"
          },
          {
            "paramName": "customCommand",
            "paramValue": "setOptOutCookie",
            "type": "EQUALS"
          },
          {
            "paramName": "customCommand",
            "paramValue": "enableGdprContext",
            "type": "EQUALS"
          },
          {
            "paramName": "customCommand",
            "paramValue": "addGlobalContexts",
            "type": "EQUALS"
          },
          {
            "paramName": "customCommand",
            "paramValue": "removeGlobalContexts",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "displayName": "Command argument",
        "simpleValueType": true,
        "name": "customCommandArg",
        "type": "TEXT",
        "valueHint": "Add argument(s) to the command",
        "help": "If the command takes multiple arguments (e.g. enableGdprContext), separate each with a comma."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "trackingParamsConfig",
    "displayName": "Additional Tracking Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SELECT",
        "name": "customContexts",
        "displayName": "Add Custom Contexts",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "no",
            "displayValue": "No"
          }
        ],
        "simpleValueType": true,
        "help": "Set to a Google Tag Manager variable that returns an array of custom contexts to add to the event hit. \u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#317-custom-contexts\"\u003eRead more\u003c/a\u003e."
      },
      {
        "type": "TEXT",
        "name": "trueTimestamp",
        "displayName": "Set Custom Timestamp",
        "simpleValueType": true,
        "valueUnit": "seconds (UNIX timestamp)",
        "valueHint": "Use system time",
        "help": "Set this to a UNIX timestamp in case you want to override the default timestamp used by Snowplow. \u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#trueTimestamps\"\u003eRead more\u003c/a\u003e."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "eventType",
        "paramValue": "customCommand",
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "displayName": "Tracker Configuration Parameters",
    "name": "trackerConfiguration",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "type": "SELECT",
        "name": "trackerConfigurationVariable",
        "displayName": "Snowplow Analytics Settings",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "select",
            "displayValue": "Select a Snowplow Analytics Settings variable"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "select",
        "help": "Set to a Google Tag Manager variable of type \"Snowplow Analytics Settings\". This is optional - you can configure the tracker either partly or entirely by the overriding settings option below."
      },
      {
        "type": "CHECKBOX",
        "name": "enableOverriding",
        "checkboxText": "Enable Overriding Settings For This Tag",
        "simpleValueType": true
      },
      {
        "type": "LABEL",
        "name": "enableOverridingLabel",
        "displayName": "Please follow the \u003ca href\u003d\"https://github.com/snowplow/snowplow/wiki/1-General-parameters-for-the-Javascript-tracker\"\u003eofficial documentation\u003c/a\u003e to ensure the values are passed correctly. Anything you set in this table overrides parameters set in the Snowplow Analytics Settings variable.",
        "enablingConditions": [
          {
            "paramName": "enableOverriding",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "overridingSettings",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Parameter Name",
            "name": "name",
            "type": "TEXT",
            "isUnique": true,
            "selectItems": [
              {
                "value": "appId",
                "displayValue": "appId"
              },
              {
                "value": "platform",
                "displayValue": "platform"
              },
              {
                "value": "respectDoNot",
                "displayValue": "respectDoNotTrack"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Parameter Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "enableOverriding",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "newRowButtonText": "Add Parameter"
      }
    ]
  },
  {
    "displayName": "Advanced Configuration",
    "name": "advancedSettings",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "displayName": "JavaScript Tracker",
        "name": "trackerGroup",
        "groupStyle": "ZIPPY_CLOSED",
        "type": "GROUP",
        "subParams": [
          {
            "help": "This is the global namespace reserved for the Snowplow tracker. \u003cstrong\u003eNote!\u003c/strong\u003e If you change this from the default \"snowplow\", you must edit template permissions, and change \"snowplow\", \"snowplow.q\", \"snowplow.apply\", and \"snowplow.q.push\" to match the new global method name.",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "displayName": "Global Method Name",
            "defaultValue": "snowplow",
            "simpleValueType": true,
            "name": "globalName",
            "type": "TEXT"
          },
          {
            "help": "Add the URL where your self-hosted Snowplow JavaScript library can be downloaded from. Remember to update \u003ca href\u003d\"https://www.simoahava.com/analytics/custom-templates-guide-for-google-tag-manager/#injects-scripts\"\u003e\u003cstrong\u003etemplate permissions\u003c/strong\u003e\u003c/a\u003e to allow script injection requests to this URL.",
            "valueValidators": [
              {
                "args": [
                  "^https://.*"
                ],
                "type": "REGEX"
              }
            ],
            "displayName": "Self-hosted Library URL",
            "simpleValueType": true,
            "name": "selfHostedUrl",
            "type": "TEXT"
          }
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const createQueue = require('createQueue');
const copyFromWindow = require('copyFromWindow');
const setInWindow = require('setInWindow');
const callInWindow = require('callInWindow');
const injectScript = require('injectScript');
const makeInteger = require('makeInteger');
const makeString = require('makeString');
const makeNumber = require('makeNumber');
const makeTableMap = require('makeTableMap');
const getType = require('getType');
const copyFromDataLayer = require('copyFromDataLayer');
const log = require('logToConsole');

// Access the generic settings
const globalName = data.globalName;
const libUrl = data.selfHostedUrl;
const trackerName = data.trackerName;
const endpoint = data.collectorEndpoint;

// Creaete a list of initialized trackers
const trackerListGlobalName = '_snowplow_trackers';
const pushToTrackerList = createQueue(trackerListGlobalName);

// Helper
const args = [];
const fail = msg => {
  log('[ERROR GTM / Snowplow Analytics] ' + msg);
  return data.gtmOnFailure();
};

// Helper for creating Enhanced Ecommerce contexts
const parseEECObject = obj => {
  // Valid actions the script will look for in the dataLayer
  const actions = ['promoClick', 'click', 'detail', 'add', 'remove', 'checkout', 'checkout_option', 'purchase', 'refund'];
  let action;
  // Add an impression context for each impression in the hit
  if (getType(obj.impressions) === 'array') {
    obj.impressions.forEach(i => tracker('addEnhancedEcommerceImpressionContext',
                                         i.id,
                 				         i.name,
				                         i.list,
				                         i.brand,
				                         i.category,
				                         i.position,
				                         i.price,
				                         obj.currencyCode));
    action = 'view';
  }
  // Track promotion views for each promotion in the hit, as long as there isn't a promoClick in the object
  if (obj.promoView && !obj.promoClick && getType(obj.promoView.promotions) === 'array') {
    obj.promoView.promotions.forEach(p => tracker('addEnhancedEcommercePromoContext',
						                          p.id,
						                          p.name,
						                          p.creative,
						                          p.position,
						                          obj.currencyCode));
    action = 'view';
  }
  // Go through all the actions and stop at the first one that matches
  actions.some(a => {
    // Add a product context for every product in the hit
    if (obj[a] && getType(obj[a].products) === 'array') {
      obj[a].products.forEach(p => tracker('addEnhancedEcommerceProductContext',
				                           p.id,
                				           p.name,
                          				   obj[a].actionField ? obj[a].actionField.list : null,
 				                           p.brand,
                 				           p.category,
				                           p.variant,
                 				           p.price,
				                           p.quantity,
                 				           p.coupon,
				                           p.position,
                 				           obj.currencyCode));
    }
    // Add an action context for the actionField object
    if (obj[a] && obj[a].actionField) {
      const af = obj[a].actionField;
      tracker('addEnhancedEcommerceActionContext',
              af.id,
              af.affiliation,
              af.revenue,
              af.tax,
              af.shipping,
              af.coupon,
              af.list,
              af.step,
              af.option,
              obj.currencyCode);
    }
    if (obj[a]) {
      // Map the promoClick to its counterpart in Snowplow
      action = a === 'promoClick' ? 'promo_click' : a;
      return true;
    }
  });
  return action;
};
    
// Helper that returns a valid tracker configuration object
const getTrackerConfiguration = () => {
  // Fail if invalid variable
  if (data.trackerConfigurationVariable !== 'select' && data.trackerConfigurationVariable.type !== 'snowplow') {
    return false;
  }
  // Return if no parameters added
  if (data.trackerConfigurationVariable === 'select' && (!data.overridingSettings || !data.overridingSettings.length)) {
    return {};
  }
  
  // Set the configuration to the variable return object
  const config = data.trackerConfigurationVariable !== 'select' ? data.trackerConfigurationVariable : {};
  
  // Override individual fields in the config object from tag settings
  const overrideSettings = data.overridingSettings && data.overridingSettings.length ? makeTableMap(data.overridingSettings, 'name', 'value') : {};
  for (let prop in overrideSettings) {
    config[prop] = overrideSettings[prop];
  }
  
  // Normalize values
  for (let prop in config) {
    if (config[prop] === 'null') config[prop] = null;
    if (config[prop] === 'true') config[prop] = true;
    if (config[prop] === 'false') config[prop] = false;
    if (makeNumber(config[prop])) config[prop] = makeNumber(config[prop]);
  }
  
  return config;
};

// Build the Snowplow global namespace and return the tracker
const getSp = () => {
  const snowplow = copyFromWindow(globalName);
  if (snowplow) {
    return snowplow;
  }

  const globalNamespace = createQueue('GlobalSnowplowNamespace');
  globalNamespace(globalName);
  // Can't use createArgumentsQueue here since the Snowplow tracker library
  // does not work with GTM's wrapper
  setInWindow(globalName, function() {
    callInWindow('snowplow.q.push', arguments);
  });
  createQueue('snowplow.q');
  return copyFromWindow(globalName);
};

const tracker = getSp();
const config = getTrackerConfiguration();
if (!config) {
  return fail('Could not create a proper tracker configuration object.');
}

// Only initialize the tracker if it hasn't been initialized yet
if (copyFromWindow(trackerListGlobalName).indexOf(trackerName) === -1) {
  tracker('newTracker', trackerName, endpoint, config);
  pushToTrackerList(trackerName);
}

// If using event parameter variable, require the variable to return an object
if (data.paramsFromVariable && data.paramsFromVariable !== 'no' && getType(data.paramsFromVariable) !== 'object') return fail('Parameter variable must return an object.');
let paramObj;
if (data.paramsFromVariable && data.paramsFromVariable !== 'no') {
  paramObj = data.paramsFromVariable;
}

switch (data.eventType) {
  case 'adTracking':
    if (!paramObj) {
      // If parameters are set manually
      paramObj = data.adTrackingParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for ad tracking hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    // Validate hit
    if (paramObj.costModel && ['cpa','cpc','cpm'].indexOf(paramObj.costModel) === -1) return fail('Invalid value for "costModel" in ad tracking hit.');
    if (data.adTrackingType === 'trackAdClick' && !paramObj.targetUrl) return fail('Missing "targetUrl" in ad tracking hit.');

    if (data.adTrackingType === 'trackAdImpression') {
      args.push(
        data.adTrackingType,
        paramObj.impressionId,
        paramObj.costModel,
        paramObj.cost,
        paramObj.targetUrl,
        paramObj.bannerId,
        paramObj.zoneId,
        paramObj.advertiserId,
        paramObj.campaignId
      );
    } else if (data.adTrackingType === 'trackAdClick') {
      args.push(
        data.adTrackingType,
        paramObj.targetUrl,
        paramObj.clickId,
        paramObj.costModel,
        paramObj.cost,
        paramObj.bannerId,
        paramObj.zoneId,
        paramObj.impressionId,
        paramObj.advertiserId,
        paramObj.campaignId
      );
    } else {
      args.push(
        data.adTrackingType,
        paramObj.conversionId,
        paramObj.costModel,
        paramObj.cost,
        paramObj.category,
        paramObj.action,
        paramObj.property,
        paramObj.initialValue,
        paramObj.advertiserId,
        paramObj.campaignId
      );
    }
    break;
  case 'cartTracking':
    if (!paramObj) { 
      paramObj = data.cartTrackingParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for cart tracking hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    // Validate hit
    if (!paramObj.sku) return fail('Missing "sku" from cart tracking hit.');
    if (!paramObj.unitPrice) return fail('Missing "unitPrice" from cart tracking hit.');
    if (!paramObj.quantity) return fail('Missing "quantity" from cart tracking hit.');

    args.push(
      data.cartTrackingType,
      paramObj.sku,
      paramObj.name,
      paramObj.category,
      paramObj.unitPrice,
      paramObj.quantity,
      paramObj.currency
    );
    break;
  case 'trackError':
    if (!paramObj) { 
      paramObj = data.errorTrackingParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for error tracking hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    // Validate hit
    if (!paramObj.message) return fail('Missing "message" from error tracking hit.');
    args.push(
      'trackError',
      paramObj.message,
      paramObj.filename,
      paramObj.lineno,
      paramObj.colno,
      false
    );
    break;
  case 'trackSiteSearch':
    let terms;
    if (!paramObj) { 
      paramObj = data.siteSearchParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for site search hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    // Validate hit
    if (!paramObj.terms) return fail('Missing "terms" from site search hit.');
    if (paramObj.filters && getType(paramObj.filters) !== 'object') return fail('"filters" in the site search hit should be an object.');

    // Normalize terms
    if (getType(paramObj.terms) === 'array') terms = paramObj.terms;
    if (getType(paramObj.terms) === 'string') terms = paramObj.terms.split(',').map(t => t.trim());
    args.push(
      'trackSiteSearch',
      terms,
      paramObj.filters,
      paramObj.totalResults,
      paramObj.pageResults
    );
    break;
  case 'trackPageView':
    if (data.pageViewEnablePageActivity) {
      const callback = data.pageViewActivityCallback !== 'no' && getType(data.pageViewActivityCallback) === 'function' ? data.pageViewActivityCallback : null;
      // Call the activity tracking method *before* sending the pageview
      tracker(
        (callback ? 'enableActivityTrackingCallback:' : 'enableActivityTracking:') + trackerName, 
        makeInteger(data.pageViewMinimumVisitLength), 
        makeInteger(data.pageViewHeartBeat),
        callback
      );
    }
    args.push(
      'trackPageView',
      data.pageViewPageTitle
    );
    break;
  case 'trackStructEvent':
    if (!paramObj) { 
      paramObj = data.structEventParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for structured event hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    // Validate hit
    if (!paramObj.category) return fail('Missing "category" from structured event hit.');
    if (!paramObj.action) return fail('Missing "action" from structured event hit.');
    
    args.push(
      'trackStructEvent',
      paramObj.category,
      paramObj.action,
      paramObj.label,
      paramObj.property,
      paramObj.value
    );
    break;
  case 'trackSelfDescribingEvent':
    if (!paramObj) { 
      paramObj = data.selfDescribingEventParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for self-describing event hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    // Validate hit
    if (!data.selfDescribingEventSchemaUrl) return fail('No schema URL set for self-describing event.');

    args.push(
      data.eventType,
      { schema: data.selfDescribingEventSchemaUrl, data: paramObj }
    );
    break;
  case 'trackSocialInteraction':
    if (!paramObj) { 
      paramObj = data.socialInteractionParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for social interaction hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    // Validate hit
    if (!paramObj.action) return fail('Missing "action" from social interaction hit.');
    if (!paramObj.network) return fail('Missing "network" from social interaction hit.');
    
    args.push(
      'trackSocialInteraction',
      paramObj.action,
      paramObj.network,
      paramObj.target
    );
    break;
  case 'linkTracking':
    if (data.linkTrackingType === 'enableLinkClickTracking') {
      const filter = {};
      // Use whitelist if available, blacklist if not
      if (data.linkTrackingWhitelist || data.linkTrackingBlacklist) {
        let filterValue = data.linkTrackingWhitelist || data.linkTrackingBlacklist;
        // Convert comma-separated string to an array
        filterValue = filterValue && getType(filterValue) === 'string' ? filterValue.split(',').map(f => f.trim()) : null;
        if (filterValue) filter[data.linkTrackingWhitelist ? 'whitelist' : 'blacklist'] = filterValue;
      }
      args.push(
        'enableLinkClickTracking',
        filter,
        !!data.linkTrackingPseudoClicks,
        !!data.linkTrackingInnerHTML
      );
    }
    else {
      const params = data.linkTrackingParameters && data.linkTrackingParameters.length ? makeTableMap(data.linkTrackingParameters, 'name', 'value') : null;
      let classes;
      // Validate hit
      if (!params) return fail('No parameters passed to link click tracking hit.');
      if (!params.targetUrl) return fail('Missing "targetUrl" from link click tracking hit.');
      // Normalize elementClasses to array (split and trim if string)
      if (params.elementClasses) {
        if (getType(params.elementClasses === 'array')) classes = params.elementClasses;
        if (getType(params.elementClasses === 'string')) classes = params.elementClasses.split(',').map(c => c.trim());
      }
      args.push(
        'trackLinkClick',
        params.targetUrl,
        params.elementId,
        classes,
        params.elementTarget,
        params.elementContent
      );
    }
    break;
  case 'trackConsent':
    if (!paramObj) { 
      paramObj = data.consentParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for consent hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    if (data.consentType === 'grant') {
      // Validate hit
      if (!paramObj.id) return fail('Missing "id" from consent grant hit.');
      if (!paramObj.version) return fail('Missing "version" from consent grant hit.');

      args.push(
        'trackConsentGranted',
        paramObj.id, 
        paramObj.version, 
        paramObj.name,
        paramObj.description,
        paramObj.expiry
      );
    } else {
      // Validate hit
      if (!paramObj.all && !paramObj.id && !paramObj.version) return fail('Must have either "id" and "version", or "all" set to true, in consent withdraw hit.');
      if (!paramObj.all && (!paramObj.id || !paramObj.version)) return fail('Must have both "id" and "version" if "all" false in consent withdraw hit.');

      args.push(
        'trackConsentWithdrawn',
        paramObj.all || false,
        paramObj.id,
        paramObj.version,
        paramObj.name,
        paramObj.description
      );
    }
    break;
  case 'formTracking':
    const formConfig = {
      forms: {},
      fields: {}
    };
    let filterForm = data.formTrackingWhitelistForms || data.formTrackingBlacklistForms;
    let filterField = data.formTrackingWhitelistFields || data.formTrackingBlacklistFields;
    if (getType(filterForm) === 'string') filterForm = filterForm.split(',').map(f => f.trim());
    if (getType(filterField) === 'string') filterField = filterField.split(',').map(f => f.trim());
    if (getType(filterForm) === 'array') formConfig.forms[data.formTrackingWhitelistForms ? 'whitelist' : 'blacklist'] = filterForm;
    if (getType(filterField) === 'array') formConfig.fields[data.formTrackingWhitelistFields ? 'whitelist' : 'blacklist'] = filterField;
    args.push(
      'enableFormTracking',
      formConfig
    );
    break;
  case 'trackTiming':
    if (!paramObj) { 
      paramObj = data.timingParams;
      if (!paramObj || !paramObj.length) return fail('No parameters provided for timing hit!');
      paramObj = makeTableMap(paramObj, 'name', 'value');
    }
    // Validate hit
    if (!paramObj.category) return fail('Missing "category" from timing hit.');
    if (!paramObj.variable) return fail('Missing "variable" from timing hit.');
    if (!paramObj.timing) return fail('Missing "timing" from timing hit.');
    
    args.push(
      'trackTiming',
      paramObj.category,
      paramObj.variable,
      paramObj.timing,
      paramObj.label
    );
    break;
  case 'enhancedEcommerce':
    let ecom;
    // Use dataLayer if available, otherwise use variable
    if (data.userDataLayer) {
      ecom = copyFromDataLayer('ecommerce', '1');
    } else {
      ecom = getType(data.enhancedEcommerceVariable) === 'object' ? data.enhancedEcommerceVariable.ecommerce : null;
    }
    // Validate hit
    if (!ecom) return fail('No valid "ecommerce" object found');
    const action = parseEECObject(ecom);
    if (action) { 
      args.push('trackEnhancedEcommerceAction', action); 
    } else { 
      return fail('Unable to track any valid Enhanced Ecommerce event.'); 
    }
    break;
  case 'customCommand':
    switch (data.customCommand) {
      case 'setVisitorCookieTimeout':
        args.push(
          data.customCommand,
          makeInteger(data.customCommandArg)
        );
        break;
      case 'setCountPreRendered':
        args.push(
          data.customCommand,
          makeString(data.customCommandArg) === 'true'
        );
        break;
      case 'enableGdprContext':
        let parts;
        if (getType(data.customCommandArg) === 'array') {
          parts = data.customCommandArg;
        } else if (getType(data.customCommandArg) === 'string') {
          parts = data.customCommandArg.split(',').map(s => s.trim());
        } else {
          return fail('Invalid arguments passed to "enableGdprContext".');
        }
        if (['consent', 'contract', 'legalObligation', 'vitalInterests', 'publicTask', 'legitimateInterests'].indexOf(parts[0]) === -1) return fail('Invalid value set for "basisForProcessing".');
        parts.unshift('enableGdprContext');
        parts.forEach(p => args.push(p));
        break;
      case 'addGlobalContexts':
      case 'removeGlobalContexts':
        args.push(
          data.customCommand,
          getType(data.customCommandArg) !== 'array' ? [data.customCommandArg] : data.customCommandArg
        );
        break;
      case 'setUserId':
      case 'setUserIdFromLocation':
      case 'setUserIdFromReferrer':
      case 'setUserIdFromCookie':
      case 'setCustomUrl':
      case 'setReferrerUrl':
        args.push(
          data.customCommand,
          data.customCommandArg
        );
        break;
      default:
        args.push(data.customCommand);
        break;
    }
    break;
}

// Add tracker name to command
args[0] = args[0] + ':' + trackerName;

// Add custom contexts
args.push(data.customContexts !== 'no' && getType(data.customContexts) === 'array' ? data.customContexts : null);

if (data.eventType === 'trackPageView') {
  args.push(data.pageViewPageContextFunction !== 'no' && getType(data.pageViewPageContextFunction) === 'function' ? data.pageViewPageContextFunction : null);
}

// Add true timestamp
if (data.trueTimestamp) args.push({type: 'ttm', value: data.trueTimestamp});

// Execute the command and arguments
callInWindow(globalName + '.apply', null, args);

injectScript(libUrl, data.gtmOnSuccess, data.gtmOnFailure, 'splibrary');


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "GlobalSnowplowNamespace"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snowplow"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snowplow.q"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_snowplow_trackers"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snowplow.q.push"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "snowplow.apply"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://github.com/snowplow/snowplow-javascript-tracker/releases/download/2.14.0/sp.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ecommerce"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Initiates global queue
  code: |-
    let firstTry = true;
    mock('copyFromWindow', key => {
      if (key === mockData.globalName && firstTry) {
        firstTry = false;
        return;
      }
      if (key === mockData.globalName) {
        return () => {};
      }
      if (key === '_snowplow_trackers') return [];
    });

    mock('createQueue', key => {
      return () => {};
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('createQueue').wasCalledWith('GlobalSnowplowNamespace');
    assertApi('createQueue').wasCalledWith('snowplow.q');
    assertApi('setInWindow').wasCalled();
    assertApi('gtmOnSuccess').wasCalled();
- name: Doesn't initiate global queue if already initiated
  code: |-
    mock('copyFromWindow', key => {
      if (key === mockData.globalName) {
        return () => {};
      }
      if (key === '_snowplow_trackers') return [];
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('createQueue').wasCalledWith('_snowplow_trackers');
    assertApi('createQueue').wasNotCalledWith('snowplow.q');
    assertApi('setInWindow').wasNotCalled();
    assertApi('gtmOnSuccess').wasCalled();
- name: Creates a new tracker
  code: "let trackerCreated = false;\nmock('copyFromWindow', key => {\n  if (key ===\
    \ mockData.globalName) {\n    return function() {\n      if (arguments[0] ===\
    \ 'newTracker') {\n        assertThat(arguments[1], 'Incorrect tracker name').isEqualTo(mockData.trackerName);\n\
    \        assertThat(arguments[2], 'Incorrect collector endpoint').isEqualTo(mockData.collectorEndpoint);\n\
    \        assertThat(arguments[3], 'Incorrect config object').isEqualTo({});\n\
    \        trackerCreated = true;\n      }  \n    };\n  }\n  if (key === '_snowplow_trackers')\
    \ return [];\n});\n\n// Call runCode to run the template's code.\nrunCode(mockData);\n\
    \n// Verify that the tag finished successfully.\nassertThat(trackerCreated, 'New\
    \ tracker not created').isEqualTo(true);\nassertApi('gtmOnSuccess').wasCalled();"
- name: Uses existing tracker
  code: "mock('copyFromWindow', key => {\n  if (key === mockData.globalName) {\n \
    \   return function() {\n      assertThat(arguments[0], 'New tracker created even\
    \ though it already existed').isNotEqualTo('newTracker');  \n    };\n  }\n  if\
    \ (key === '_snowplow_trackers') return [mockData.trackerName];\n});\n\n// Call\
    \ runCode to run the template's code.\nrunCode(mockData);\n\n// Verify that the\
    \ tag finished successfully.\nassertApi('gtmOnSuccess').wasCalled();"
- name: Tracker configuration loaded from variable
  code: "mockData.trackerConfigurationVariable = {appId: 'test', type: 'snowplow'};\n\
    mock('copyFromWindow', key => {\n  if (key === mockData.globalName) {\n    return\
    \ function() {\n      if (arguments[0] === 'newTracker') {\n        assertThat(arguments[3],\
    \ 'Incorrect config object').isEqualTo(mockData.trackerConfigurationVariable);\n\
    \      }  \n    };\n  }\n  if (key === '_snowplow_trackers') return [];\n});\n\
    \n// Call runCode to run the template's code.\nrunCode(mockData);\n\n// Verify\
    \ that the tag finished successfully.\nassertApi('gtmOnSuccess').wasCalled();"
- name: Tracker configuration not loaded if incorrect variable
  code: |-
    mockData.trackerConfigurationVariable = {appId: 'test', type: 'notSnowplow'};
    mock('copyFromWindow', key => {
      if (key === mockData.globalName) {
        return function() {};
      }
      if (key === '_snowplow_trackers') return [];
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnFailure').wasCalled();
- name: Tracker configuration loaded from parameters, overrides variable
  code: "mockData.trackerConfigurationVariable = {appId: 'test', type: 'snowplow',\
    \ platform: 'ios'};\nmockData.overridingSettings = [{name: 'platform', value:\
    \ 'web'}];\nmock('copyFromWindow', key => {\n  if (key === mockData.globalName)\
    \ {\n    return function() {\n      if (arguments[0] === 'newTracker') {\n   \
    \     assertThat(arguments[3], 'Variable config not overridden').isEqualTo({appId:\
    \ 'test', type: 'snowplow', platform: 'web'});\n      }  \n    };\n  }\n  if (key\
    \ === '_snowplow_trackers') return [];\n});\n\n// Call runCode to run the template's\
    \ code.\nrunCode(mockData);\n\n// Verify that the tag finished successfully.\n\
    assertApi('gtmOnSuccess').wasCalled();"
- name: Hit sent with params from variable
  code: |-
    mockData.eventType = 'adTracking';
    mockData.paramsFromVariable = {impressionId: 'test'};
    mockData.adTrackingType = 'trackAdImpression';

    mock('copyFromWindow', key => {
      if (key === mockData.globalName) {
        return () => {};
      }
      if (key === '_snowplow_trackers') return [mockData.trackerName];
    });

    mock('callInWindow', (arg1, arg2, arg3) => {
      assertThat(arg1, 'Invalid argument to callInWindow').isEqualTo(mockData.globalName + '.apply');
      assertThat(arg3[0], 'Invalid argument to callInWindow').isEqualTo(mockData.adTrackingType + ':' + mockData.trackerName);
      assertThat(arg3[1], 'Invalid argument to callInWindow').isEqualTo('test');
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: Hit sent with params from table
  code: |-
    mockData.eventType = 'adTracking';
    mockData.paramsFromVariable = 'no';
    mockData.adTrackingParams = [{name: 'impressionId', value: 'test'}];
    mockData.adTrackingType = 'trackAdImpression';

    mock('copyFromWindow', key => {
      if (key === mockData.globalName) {
        return () => {};
      }
      if (key === '_snowplow_trackers') return [mockData.trackerName];
    });

    mock('callInWindow', (arg1, arg2, arg3) => {
      assertThat(arg1, 'Invalid argument to callInWindow').isEqualTo(mockData.globalName + '.apply');
      assertThat(arg3[0], 'Invalid command in args object').isEqualTo(mockData.adTrackingType + ':' + mockData.trackerName);
      assertThat(arg3[1], 'Invalid first argument to command in args object').isEqualTo('test');
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: Custom command called with arguments
  code: |-
    mockData.eventType = 'customCommand';
    mockData.customCommand = 'addGlobalContexts';
    mockData.customCommandArg = ['test'];

    mock('copyFromWindow', key => {
      if (key === mockData.globalName) {
        return () => {};
      }
      if (key === '_snowplow_trackers') return [mockData.trackerName];
    });

    mock('callInWindow', (arg1, arg2, arg3) => {
      assertThat(arg1, 'Invalid argument to callInWindow').isEqualTo(mockData.globalName + '.apply');
      assertThat(arg3[0], 'Invalid command in args object').isEqualTo(mockData.customCommand + ':' + mockData.trackerName);
      assertThat(arg3[1], 'Invalid first argument to command in args object').isEqualTo(mockData.customCommandArg);
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: Context added to hit
  code: |-
    mockData.eventType = 'trackPageView';
    mockData.pageViewPageTitle = 'test';
    mockData.pageViewPageContextFunction = () => {};
    mockData.customContexts = ['test'];
    mockData.trueTimestamp = 123;

    mock('copyFromWindow', key => {
      if (key === mockData.globalName) {
        return () => {};
      }
      if (key === '_snowplow_trackers') return [mockData.trackerName];
    });

    mock('callInWindow', (arg1, arg2, arg3) => {
      assertThat(arg1, 'Invalid argument to callInWindow').isEqualTo(mockData.globalName + '.apply');
      assertThat(arg3[0], 'Invalid command in args object').isEqualTo(mockData.eventType + ':' + mockData.trackerName);
      assertThat(arg3[1], 'Invalid page title').isEqualTo(mockData.pageViewPageTitle);
      assertThat(arg3[2], 'Invalid context object').isEqualTo(mockData.customContexts);
      assertThat(arg3[3], 'Invalid context function').isEqualTo(mockData.pageViewPageContextFunction);
      assertThat(arg3[4], 'Invalid timestamp object').isEqualTo({type: 'ttm', value: mockData.trueTimestamp});
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
setup: "const log = require('logToConsole');\n\nconst mockData = {\n  trackerName:\
  \ 'spTracker',\n  selfHostedUrl: 'https://github.com/snowplow/snowplow-javascript-tracker/releases/download/2.14.0/sp.js',\n\
  \  globalName: 'snowplow',\n  collectorEndpoint: 'test.domain',\n  trackerConfigurationVariable:\
  \ 'select',\n  overridingSettings: []\n};\n\nlet success, failure;\nmock('injectScript',\
  \ (url, onsuccess, onfailure) => {\n  success = onsuccess;\n  failure = onfailure;\n\
  \  if (url === mockData.selfHostedUrl) {\n    onsuccess();\n  } else {\n    onfailure();\n\
  \  }\n  return;\n});\n     "


___NOTES___

Created on 16/08/2019, 09:46:49


